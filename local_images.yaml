---
parameter_defaults:
    ContainerImagePrepare:
    -   excludes:
        - ceph
        - prometheus
        push_destination: 192.168.4.101:8787
        set:
          tag: "current-tripleo-rdo"
          namespace: "docker.io/tripleomaster"
          name_prefix: "openstack"
          name_suffix: ""
          rhel_containers: "false"

    CinderEnableNfsBackend: True
    CinderEnableIscsiBackend: False
    CinderNfsMountOptions: context=system_u:object_r:container_file_t:s0
    CinderNfsServers: 172.16.27.211:/mnt/storage/openstack/cinder

    GlanceEnabledImportMethods: web-download,glance-direct
    GlanceNfsShare: 172.16.27.211:/mnt/storage/openstack/glance
    GlanceStagingNfsShare: 172.16.27.211:/mnt/storage/openstack/glance-staging
    GlanceCacheEnabled: true

    ComputeExtraConfig:
        nova::compute::libvirt::cpu_mode: host-passthrough
        nova::compute::libvirt::images_type: raw
        nova::compute::libvirt::disk_cachemodes:
          - file=writeback
          - block=none
          - network=writeback
        nova::compute::libvirt::force_raw_images: true
        nova::compute::libvirt::use_cow_images: true
        nova::compute::libvirt::preallocate_images: space
        nova::compute::libvirt::hw_machine_type:
          - x86_64=q35

    ComputeParameters:
        KernelArgs: "default_hugepagesz=1GB hugepagesz=1GB hugepages=4 amd_iommu=on iommu=pt kvm_amd.npt=1 kvm.ignore_msrs=1"

resource_registry:
  # Network configuration assignments for the Controller
  OS::TripleO::Controller::Net::SoftwareConfig: /home/centos/dual-nic-multi-vlan-controller.yaml
  # Network configuration assignments for the Compute
  OS::TripleO::Compute::Net::SoftwareConfig: /home/centos/dual-nic-multi-vlan-compute.yaml
  # Network configuration assignments for the BlockStorage
  OS::TripleO::BlockStorage::Net::SoftwareConfig: /home/centos/dual-nic-multi-vlan-controller.yaml
  # Network configuration assignments for the ObjectStorage
  OS::TripleO::ObjectStorage::Net::SoftwareConfig: /home/centos/dual-nic-multi-vlan-controller.yaml
  # Network configuration assignments for the CephStorage
  OS::TripleO::CephStorage::Net::SoftwareConfig: /home/centos/dual-nic-multi-vlan-controller.yaml

